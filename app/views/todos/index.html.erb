<div class="container mt-4">
    <h1>TODOリスト</h1>

    <%= link_to '新規TODO作成', new_todo_path, class: 'btn btn-primary mb-3' %>

    <% @todos.each do |todo| %>
    <div class="card mb-3">
        <div class="card-body">
        <h5 class="card-title"><%= todo.title %></h5>
        <p class="card-text"><%= todo.description %></p>
        <div class="form-check mb-3">
            <%= form_with(model: todo, local: true) do |f| %>
            <%= f.check_box :completed, class: 'form-check-input', onchange: 'this.form.submit()' %>
            <%= f.label :completed, '完了', class: 'form-check-label' %>
            <% end %>
        </div>
        <div class="btn-group">
            <%= link_to '編集', edit_todo_path(todo), class: 'btn btn-warning' %>
            <%= link_to '削除', todo_path(todo), 
                method: :delete, 
                data: { confirm: '本当に削除しますか？' }, 
                class: 'btn btn-danger' %>
        </div>
    </div>
    </div>
    <% end %>
</div>